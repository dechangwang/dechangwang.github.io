<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Wang.dchang&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Wang.dchang's blog">
<meta property="og:url" content="https://dechangwang.github.io/index.html">
<meta property="og:site_name" content="Wang.dchang's blog">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Wang.dchang's blog">
<meta name="twitter:description">
  
    <link rel="alternate" href="/atom.xml" title="Wang.dchang&#39;s blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Wang.dchang&#39;s blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dechangwang.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-linux-operation-order" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/19/linux-operation-order/" class="article-date">
  <time datetime="2017-05-19T02:42:38.000Z" itemprop="datePublished">2017-05-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/19/linux-operation-order/">linux operation order</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li><p>提交包到spark上运行</p>
<ul>
<li>./bin/spark-submit –conf spark.neo4j.bolt.password=wang –conf spark.neo4j.bolt.url=bolt://192.168.171.128:7687 –master spark://192.168.171.128:7077 –class cn.edu.wang.neo4j.Main /home/andy/Neo4jSpark.jar</li>
</ul>
</li>
<li><p>hadoop查看文件<br>./bin/hadoop fs -ls input/<br>./bin/hadoop fs -ls /</p>
</li>
<li><p>从服务器下载整个目录</p>
<pre><code>scp -r username@servername:remote_dir/ /tmp/local_dir 
</code></pre><p>  例如:scp -r root@192.168.0.101 /home/kimi/test  /tmp/local_dir</p>
</li>
<li>上传目录到服务器<pre><code>scp  -r /tmp/local_dir username@servername:remote_dir
例如：
scp -r test      root@192.168.0.101:/var/www/   把当前目录下的test目录上传到服务器
的/var/www/ 目录
</code></pre></li>
</ul>
<ul>
<li>chown 修改文件所有者<br>chown [-R] 账号名称 文件或目录<br>chown [-R] 账号名称:用户组名称 文件或目录</li>
</ul>
<h5 id="linux下的操作命令"><a href="#linux下的操作命令" class="headerlink" title="linux下的操作命令"></a>linux下的操作命令</h5><p>开启端口：<br>firewall-cmd –zone=public –add-port=端口号/tcp –permanent<br>firewall-cmd –reload<br><a href="https://oracle-base.com/articles/linux/linux-firewall-firewalld" target="_blank" rel="external">端口的相关知识参考自</a></p>
<p>如查看8888端口，则在终端中输入：<br>    lsof -i:8888<br>查看端口占用：ss -lnp|grep 9000</p>
<h5 id="Linux-下的oracle篇"><a href="#Linux-下的oracle篇" class="headerlink" title="Linux 下的oracle篇"></a>Linux 下的oracle篇</h5><p><em>某些操作是以dba登录到sqlplus</em></p>
<ul>
<li>在登录到sqlplus时，需要以oracle用户登录（以用户为oracle为例）<ul>
<li>su - oracle切换帐户一定要加 “-“，否则在启动监听服务时汇报如下错误：bash:lsnrctl:command not found</li>
<li>lsnrctl start</li>
<li>关闭监听lsnrctl stop</li>
</ul>
</li>
<li>shutdown immediate 关闭oracle数据库</li>
<li>当oracle数据库出现ORA-01102: cannot mount database in EXCLUSIVE mode错误时，可以先用执行指令<ul>
<li>cd $ORACLE_HOME/dbs<br>fuser -u lkPERSON(这里的person是数据库sid)<br>fuser -k lkPERSON （）</li>
</ul>
</li>
<li>select instance_name from v$instance 查看当前连接的数据库实例</li>
<li>oracel中使用替换更新字段<ul>
<li>使用replace函数，以替换掉value列中所有的’-‘为例<br>-update JF_ATTR_VALUE set VALUE = REPLACE(value ,’-‘,’:’) where VALUE like ‘%-%’;</li>
</ul>
</li>
</ul>
<p>lsb_release -a ,即可列出所有版本信息</p>
<p>ls -a 查看隐藏信息<br>ls -lh 以文件原本的大小显示而不是以字节的大小显示<br>ls -ld 目录本身的权限<br>mkdir -p 目录/子目录  递归创建目录<br>cd = cd ~  回到家目录<br>cd - 进入上一次的目录<br>rmdir 目录/ 删除非空目录<br>rm fileName 删除文件<br>rm -r directoryName 删除目录<br>rm -rf directory/ 删除目录<br>cp fileName location 复制<br>cp -r directoryName location 复制目录<br>cp -a directoryName location 复制的文件与源文件完全一致<br>mv [原文件或目录] [目标目录] 剪切或move<br>touch 文件名 新建<br>文件搜索<br>    locate 文件名 搜索文件</p>
<p>dup复制文件<br>dup2是一个原子操作<br>fcntl(filedes.F_DIPFD,0)页也可实现复制<br>chomd +x 赋给执行权限<br>粘诸位S_ISVTX 如果对目录设置了S_ISVTX<br>Full buffer  普通文件<br>Line buffer  设备文件 例如 标准输入输出 输进去一行后回车<br>在获得文件表述符<br>fdopen<br>w+|w+b 是文件长度为0 </p>
<p>fork 用来创建进程<br>创建一个进程 首先创建的是 task_struct<br>process 内存空间  bss heep  stack</p>
<p>共享文件 就是文件标志符在共享<br>close-on-exec 文件描述符的状态<br>    若close-on-exec中设置为1 则在可执行文件中文件描述符无效 为0时有效</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dechangwang.github.io/2017/05/19/linux-operation-order/" data-id="cj2v8w20d0004ts9x1d1148u7" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-angularjs-Servlet" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/09/angularjs-Servlet/" class="article-date">
  <time datetime="2017-03-09T14:51:39.000Z" itemprop="datePublished">2017-03-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/09/angularjs-Servlet/">angularjs_Servlet</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="使用angularjs向后台Servlet发送请求"><a href="#使用angularjs向后台Servlet发送请求" class="headerlink" title="使用angularjs向后台Servlet发送请求"></a>使用angularjs向后台Servlet发送请求</h5><ul>
<li><p>js发送请求的方式为：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$http(&#123;</span><br><span class="line">           url: <span class="string">'ActivityServlet'</span>,<span class="comment">//后台Servlet</span></span><br><span class="line">           method: <span class="string">"POST"</span>,</span><br><span class="line">           params : &#123;</span><br><span class="line">               id_number : $scope.id_number,</span><br><span class="line">               email : <span class="string">"123123@3321.com"</span></span><br><span class="line">           &#125;</span><br><span class="line">       &#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">           <span class="built_in">console</span>.log(<span class="string">"hahahah"</span>);</span><br><span class="line">           <span class="built_in">console</span>.log(response.data);</span><br><span class="line">       &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">           <span class="built_in">console</span>.log(<span class="string">"error"</span>);</span><br><span class="line">           <span class="built_in">console</span>.log(response);</span><br><span class="line">       &#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>后台Servlet的doPost方法中获取参数的方式：<br>String email = request.getParameter(“email”);<br>如果是自动生成的doPost方法，会调用super.doPost(request,response), 在此次使用doPost方法时，由于没有删掉<em>super.doPost()</em>这一语句，导致参数可以传到后台，但是前端一直报405method not allowed错误，通过不调用父方法而解决 </p>
</li>
</ul>
<h5 id="idea-如何将已有项目使用maven管理"><a href="#idea-如何将已有项目使用maven管理" class="headerlink" title="idea 如何将已有项目使用maven管理"></a>idea 如何将已有项目使用maven管理</h5><ul>
<li>右键module name 选择add framework support 然后选择maven即可生成默认的pom.xml文件</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dechangwang.github.io/2017/03/09/angularjs-Servlet/" data-id="cj2v8w1yd0000ts9xiuwq2tap" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-design-pattern" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/12/28/design-pattern/" class="article-date">
  <time datetime="2016-12-28T14:38:34.000Z" itemprop="datePublished">2016-12-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/28/design-pattern/">design_pattern</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="策略模式"><a href="#策略模式" class="headerlink" title="策略模式"></a>策略模式</h5><ul>
<li><p>定义：定义了算法族，分别封装起来，让它们之间可以互相替换</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">xxDuck</span></span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">swim</span><span class="params">()</span></span>&#123;<span class="comment">//具体的游泳行为&#125;</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">fly</span><span class="params">()</span></span>&#123;<span class="comment">//具体的飞行行为&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>上面的这个例子中展示了一个具体的Duck类，它可以是继承抽象的父类来实现具体的动作，也可以是没有父类只是这样一个具体类。无论有没有父类，一旦需求变化了，例如Duck的fly行为变化，这时就要修改每一个具体的实现类，如果有大量的xxDuck类，那么直接修改一大堆这些类不仅没有做到代码复用而且还可能会引入新的bug。但是如果一开始采取“针对接口编程，而不是针对实现编程”的原则，那我们就会方便很多。</p>
</li>
<li><p>改写后的xxDuck类如下所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">xxDuck</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> BehaviorFly behaviorFly;</span><br><span class="line">	<span class="keyword">private</span> BehaviorSwim behaviorSwim;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBehaviorFly</span><span class="params">(BehaviorFly behaviorFly)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.behaviorFly = behaviorFly;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBehaviorSwim</span><span class="params">(BehaviorSwim behaviorSwim)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.behaviorSwim = behaviorSwim;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fly</span><span class="params">()</span></span>&#123;</span><br><span class="line">		behaviorFly.fly();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">swim</span><span class="params">()</span></span>&#123;</span><br><span class="line">		behaviorSwim.swim();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在改写后的Duck类中，并没有指定它的具体行为，而是将具体的行为委托给了BehaviorFly和BehaviorSwim (BehaviorFly和BehaviorSwim均是接口)。这样由于不依赖于具体的实现，当fly或者swim的行为发生变化时，我们只需要修改Behavior类的实现即可，而无需修改xxDuck类。</p>
</li>
</ul>
<h5 id="观察者模式"><a href="#观察者模式" class="headerlink" title="观察者模式"></a>观察者模式</h5><ul>
<li>定义：定义了对象之间的一对多依赖，当一个对象改变状态时，它的所有依赖者都会收到通知并自动更新。</li>
</ul>
<p>被观察者Subject：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Subject</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerObserver</span><span class="params">(Observer observer)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeObserver</span><span class="params">(Observer observer)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">notifyObserver</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getData</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setData</span><span class="params">(String data)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Subject接口中提供了</p>
<ul>
<li>注册观察者registerObserver(Observer observer)方法，如果Observer关心Subject的数据变化，调用该方法成为Subject的一个观察者，那么在Subject的数据变化时会通知observer</li>
<li>移除观察者removeObserver(Observer observer)方法，当Observer对Subject的数据不感兴趣时，调用该方法通知Subject移除自己</li>
<li>通知观察者notifyObserver()方法，当Subject的数据发生变化时通知所有的观察者</li>
</ul>
<p>被观察者的一个具体实现ConcreteSubject：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcreteSubject</span> <span class="keyword">implements</span> <span class="title">Subject</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> ArrayList&lt;Observer&gt; observers;</span><br><span class="line">	<span class="keyword">private</span> String data;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerObserver</span><span class="params">(Observer observer)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (observers == <span class="keyword">null</span>)</span><br><span class="line">			observers = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">		observers.add(observer);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeObserver</span><span class="params">(Observer observer)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (observers == <span class="keyword">null</span> || observers.size() == <span class="number">0</span>)</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		<span class="keyword">int</span> index = observers.indexOf(observer);</span><br><span class="line">		<span class="keyword">if</span> (index &gt;= <span class="number">0</span>)</span><br><span class="line">			observers.remove(index);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">notifyObserver</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(observers == <span class="keyword">null</span> || observers.isEmpty())<span class="keyword">return</span>;</span><br><span class="line">		<span class="keyword">for</span> (Observer observer : observers) &#123;</span><br><span class="line">			observer.update(data);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setData</span><span class="params">(String data)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.data = data;</span><br><span class="line">		notifyObserver();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> data;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>被观察者ConcreteSubject中维护了一个观察者列表observers，每次数据变化后遍历该列表更新已注册观察者的数据。</p>
<p>观察者Observer：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Observer</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(String data)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>update(String data)更新数据，当Subject的数据变化时，调用该方法刷新Observer的数据</p>
<p>具体的观察者ConcreteObserver1，这里在构造函数中向Subject提交了注册，成为了Subject的一个观察者<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcreteObserver1</span> <span class="keyword">implements</span> <span class="title">Observer</span></span>&#123;</span><br><span class="line">	Subject subject;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">ConcreteObserver1</span><span class="params">(Subject subject)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.subject = subject;</span><br><span class="line">		subject.registerObserver(<span class="keyword">this</span>);<span class="comment">//注册成为一名观察者</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(String data)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"this is ConcreteObserver1, data = "</span>+data);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showData</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(subject != <span class="keyword">null</span>)</span><br><span class="line">			subject.getData();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h5 id="装饰者模式"><a href="#装饰者模式" class="headerlink" title="装饰者模式"></a>装饰者模式</h5><ul>
<li>定义：动态地将责任附加到对象上。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">People</span> </span>&#123;</span><br><span class="line">	<span class="keyword">protected</span> String duty = <span class="string">"[legal resident], "</span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">myDuty</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> duty;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">int</span> <span class="title">grade</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>Student是People一个子类，继承了People的责任，同时又新添加了Student自己的职责(study)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">People</span></span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">myDuty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">super</span>.myDuty()+<span class="string">"[student:study], "</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">grade</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">60</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>装饰器Decorator和被装饰者People必须要有相同的接口，以达到装饰者能够取代被装饰者。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Decorator</span> <span class="keyword">extends</span> <span class="title">People</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> String <span class="title">myDuty</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>装饰者Montor:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Monitor</span> <span class="keyword">extends</span> <span class="title">Decorator</span></span>&#123;</span><br><span class="line">	People people;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Monitor</span><span class="params">(People people)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.people = people;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">myDuty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> people.myDuty() + <span class="string">"[montor:help classmates], "</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">grade</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> people.grade()+<span class="number">5</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>装饰者StudentLeader:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentLeader</span> <span class="keyword">extends</span> <span class="title">Decorator</span></span>&#123;</span><br><span class="line">	People people;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">StudentLeader</span><span class="params">(People people)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.people = people;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">myDuty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> people.myDuty()+<span class="string">"[StudentLeader:organize activities]"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">grade</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> people.grade()+<span class="number">10</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>测试类:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//这里先用Monitor装饰器装饰Student，将得到的装饰器再用StudentLeader装饰，这也就是为什么Decorator需要继承People</span></span><br><span class="line">		People student = <span class="keyword">new</span> StudentLeader(<span class="keyword">new</span> Monitor(<span class="keyword">new</span> Student()));</span><br><span class="line">		System.out.println(student.grade()+<span class="string">"\n"</span>+student.myDuty());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h5 id="工厂模式"><a href="#工厂模式" class="headerlink" title="工厂模式"></a>工厂模式</h5><ul>
<li>定义：定义了一个创建对象的接口，但由子类确定实例化的类是哪一个，工厂方法让类把实例化推迟到子类。</li>
</ul>
<p>抽象类AbstractPizzaStore:提供了抽象方法createPizza(String type)，它的具体实现放在子类中。<br>Pizza是一个抽象类，本例中它的2个具体实现是CheesePizza和ClamPizza</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractPizzaStore</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Pizza <span class="title">orderPizza</span><span class="params">(String type)</span></span>&#123;</span><br><span class="line">		Pizza pizza = createPizza(type);</span><br><span class="line">		System.out.println(<span class="string">"do something"</span>);</span><br><span class="line">        <span class="keyword">return</span> pizza;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> Pizza <span class="title">createPizza</span><span class="params">(String type)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>抽象PizzaStore类的2个子类(CheesePizzaStore,ClamPizzaStore)，实现了createPizza()方法。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CheesePizzaStore</span> <span class="keyword">extends</span> <span class="title">AbstractPizzaStore</span></span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Pizza <span class="title">createPizza</span><span class="params">(String type)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> CheesePizza();<span class="comment">//子类中决定实例化那个类</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClamPizzaStore</span> <span class="keyword">extends</span> <span class="title">AbstractPizzaStore</span></span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Pizza <span class="title">createPizza</span><span class="params">(String type)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> ClamPizza();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>测试类<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		AbstractPizzaStore abstractPizzaStore = <span class="keyword">new</span> CheesePizzaStore();</span><br><span class="line">		abstractPizzaStore.orderPizza(<span class="string">"Cheese"</span>);</span><br><span class="line"></span><br><span class="line">		AbstractPizzaStore abstractPizzaStore1 = <span class="keyword">new</span> ClamPizzaStore();</span><br><span class="line">		abstractPizzaStore1.orderPizza(<span class="string">"Clam"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h5 id="单例模式"><a href="#单例模式" class="headerlink" title="单例模式"></a>单例模式</h5><ul>
<li>定义：确保类只有一个实例，并提供一个全局访问点</li>
</ul>
<p>单例的2中实现方式<br>饿汉实现方式：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Singleton instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>双重检查加锁实现<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> Singleton instance;</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(instance == <span class="keyword">null</span>)&#123;</span><br><span class="line">			<span class="keyword">synchronized</span> (Singleton.class) &#123;</span><br><span class="line">				<span class="keyword">if</span>(instance == <span class="keyword">null</span>)&#123;</span><br><span class="line">					instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> instance;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>饿汉实现方式在JVM加载该类时马上创建唯一的实例，保证了在任何线程访问它时已有一个static实例。无需考虑在创建实例时线程同步造成的影响。针对本例这种实现方式没有问题，但是如果在某些场景下需要参数时，这种方式不可用。</li>
<li>双重检查加锁实现方式避免了直接使用同步方法而造成的多线程访问的性能问题，只在第一次调用getInstance()时，才会进入同步块中，在同步块中再次检查instance是否为null，是为了确保new Singleton()不会被调用2次（如果有2个线程同时调用了getInstance(),那么在Thread1调用结束后，Thread2立即进入到同步块中，但是这时instance已在Thread1中new出来，如果不再次判null，则会再创建一次）</li>
</ul>
<h5 id="命令模式"><a href="#命令模式" class="headerlink" title="命令模式"></a>命令模式</h5><ul>
<li>定义：“请求”封装成对象，以便使用不同的请求、队列或者日志来参数化其他对象。<br>命令接口Command,通过其execute()方法来响应请求，任何命令需要实现该interface<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Command</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>一个具体的命令对象LightCommand,该对象中封装了动作和动作接受者Light。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LightCommand</span> <span class="keyword">implements</span> <span class="title">Command</span></span>&#123;</span><br><span class="line">	Light light; <span class="comment">//持有Light实例对象，当有请求动作到来时，调用接收者的相应方法来响应(此处为on)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">LightCommand</span><span class="params">(Light light)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.light = light;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">()</span> </span>&#123;<span class="comment">//</span></span><br><span class="line">		light.on();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLight</span><span class="params">(Light light)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.light = light;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>接受者(Light)封装了操作Light on和off的动作<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Light</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">on</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"now light is on"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">off</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"now light is off"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>调用者通过命令对象的execute方法，发出请求Light on的请求，命令对象中持有Light实例，让接受者Light响应on动作。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Command lightCommand = <span class="keyword">new</span> LightCommand(<span class="keyword">new</span> Light());</span><br><span class="line">		lightCommand.execute();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h5 id="适配器模式"><a href="#适配器模式" class="headerlink" title="适配器模式"></a>适配器模式</h5><ul>
<li>定义：将一个类的接口转换成客户期望的另一个接口<br>Duck对象<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Duck</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">quack</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fly</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MallardDuck</span> <span class="keyword">implements</span> <span class="title">Duck</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">quack</span><span class="params">()</span></span>&#123;</span><br><span class="line">    	<span class="comment">//具体实现</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fly</span><span class="params">()</span></span>&#123;</span><br><span class="line">    	<span class="comment">//具体实现</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>Turkey对象<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Turkey</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">gobble</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fly</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WildTurkey</span> <span class="keyword">implements</span> <span class="title">Turkey</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">gobble</span><span class="params">()</span></span>&#123;</span><br><span class="line">    	<span class="comment">//具体实现</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fly</span><span class="params">()</span></span>&#123;</span><br><span class="line">    	<span class="comment">//具体实现</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>现在有Duck和Turkey对象，但是想将Turkey对象当做Duck对象来用，由于二者的接口不同，显然不能直接使用，那么就写个适配器吧：<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TurkeyAdapter</span> <span class="keyword">implements</span> <span class="title">Duck</span></span>&#123;</span><br><span class="line">	Turkey turkey;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TurkeyAdapter</span><span class="params">(Turkey turkey)</span></span>&#123;</span><br><span class="line">    	<span class="keyword">this</span>.turkey = turkey;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">quack</span><span class="params">()</span></span>&#123;</span><br><span class="line">    	turkey.gobble();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fly</span><span class="params">()</span></span>&#123;</span><br><span class="line">    	turkey.fly();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>现在需要将Turkey当做Duck使用时，只需要具体的Turkey对象用TurkeyAdapter适配器适配成与Duck具有相同的接口即可使用</p>
<h5 id="外观设计模式"><a href="#外观设计模式" class="headerlink" title="外观设计模式"></a>外观设计模式</h5><ul>
<li>定义：提供了统一的接口，用来访问子系统中的一群接口。外观定义了一个高层接口，让子系统更容易使用。</li>
<li>例如上文中讲到工厂模式时，提到过制作pizza，实际中制作pizza可能需要许多步骤，例如prepare –&gt; bake –&gt; cut –&gt; box等等，但是通过createPizza方法封装了许多繁琐的步骤，原先需要调用多个接口，但是通过提供统一的createPizza接口，简化了子系统的调用。<h5 id="模板方法模式"><a href="#模板方法模式" class="headerlink" title="模板方法模式"></a>模板方法模式</h5></li>
<li>定义：在一个方法中定义一个算法的骨架，而将一些步骤延迟到子类中。模板方法使得子类在不用改变算法结构的情况下,重新定义算法中的这些步骤。<br>定义抽象的咖啡因饮料抽象类CaffeineBeverage,该类封装了公用的方法的，使用prepareRecipe定义了这些算法的步骤，由于这些步骤（算法骨架）是一致的，故而声明为final不允许子类对其修改。但是tea的brew和addCondiments方法的具体实现不同，故而将其声明为抽象的方法，具体实现由子类决定。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">CaffeineBeverage</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="keyword">final</span> <span class="title">prepareRecipe</span><span class="params">()</span></span>&#123;</span><br><span class="line">    	boilWater();</span><br><span class="line">        brew();</span><br><span class="line">        pourInCup();</span><br><span class="line">        addCondiments();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">brew</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">addCondiments</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">boilWater</span><span class="params">()</span></span>&#123;</span><br><span class="line">    	System.out.println(<span class="string">"Boiling Water"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pourtInCup</span><span class="params">()</span></span>&#123;</span><br><span class="line">    	System.out.println(<span class="string">"pourInCup"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>Tea对象类和Coffee实现各自的brew和addCondiments</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Tea</span> <span class="keyword">extends</span> <span class="title">CaffeineBeverage</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">brew</span><span class="params">()</span></span>&#123;</span><br><span class="line">    	<span class="comment">//Tea的具体实现</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCondiments</span><span class="params">()</span></span>&#123;</span><br><span class="line">    	<span class="comment">//Tea的具体实现</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Coffee</span> <span class="keyword">extends</span> <span class="title">CaffeineBeverage</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">brew</span><span class="params">()</span></span>&#123;</span><br><span class="line">    	<span class="comment">//Coffee的具体实现</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCondiments</span><span class="params">()</span></span>&#123;</span><br><span class="line">    	<span class="comment">//Coffee的具体实现</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="组合模式"><a href="#组合模式" class="headerlink" title="组合模式"></a>组合模式</h5><ul>
<li>定义：允许你将对象组合成树形结构来表现“整体/部分”层次结构。组合能够让客户以一致的方式处理个别对象和组合对象<br>Menu组件<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">MenuComponent</span></span>&#123;</span><br><span class="line">	String name;</span><br><span class="line">    String description;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(MenuComponent menuComponent)</span></span>&#123;</span><br><span class="line">    	<span class="function"><span class="keyword">throws</span> new <span class="title">UnSupportOperationException</span><span class="params">()</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> String <span class="title">getName</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> String <span class="title">description</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>菜单项对象<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MenuItem</span> <span class="keyword">extends</span> <span class="title">MenuComponent</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MenuItem</span><span class="params">(String name,String desc)</span></span>&#123;</span><br><span class="line">    	<span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.description = desc;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getName</span><span class="params">()</span></span>&#123;</span><br><span class="line">    	<span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getDescription</span><span class="params">()</span></span>&#123;</span><br><span class="line">    	<span class="keyword">return</span> description;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;</span><br><span class="line">    	System.out.println(<span class="string">"name: "</span>+name+<span class="string">"desc: "</span>+description);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>菜单类Menu可以持有菜单项或菜单<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Menu</span> <span class="keyword">extends</span> <span class="title">MenuComponent</span></span>&#123;</span><br><span class="line">	ArrayList&lt;MenuComponent&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MenuItem</span><span class="params">(String name,String desc)</span></span>&#123;</span><br><span class="line">    	<span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.description = desc;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(MenuComponent menuComponent)</span></span>&#123;</span><br><span class="line">    	list.add(menuComponent);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getName</span><span class="params">()</span></span>&#123;</span><br><span class="line">    	<span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getDescription</span><span class="params">()</span></span>&#123;</span><br><span class="line">    	<span class="keyword">return</span> description;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;</span><br><span class="line">    	System.out.println(<span class="string">"name: "</span>+name+<span class="string">"desc: "</span>+description);</span><br><span class="line">        Iterator iterator = list.iterator();</span><br><span class="line">        <span class="keyword">while</span>(iterator.hasNext())&#123;</span><br><span class="line">        	MenuComponent menuComponent = iterator.next();</span><br><span class="line">            menuComponent.print();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Menu和MenuItem都继承了MenuComponent，因而在遍历时都将其当做MenuComponent来处理，又由于菜单项不再包含子菜单，所以MenuItem的print方法只打印自己的name和description，但是由于Menu持有一个MenuComponent列表，所以需要遍历来打印出该子菜单所包含的内容，但是至于列表中具体的是哪个对象这里无需关心，只知道是MenuComponent可以调用器print方法就足够了。</p>
<ul>
<li>策略模式：定义了算法族，分别封装起来，让它们之间可以互相替换</li>
<li>观察者</li>
<li>装饰者模式：动态地将责任附加到对象上；装饰者和被装饰者必须是一样的类型</li>
<li>工厂模式</li>
<li>单例模式</li>
<li>命令模式：将请求封装成对象，以便使用不同的请求、队列或者日志来参数化其他对象</li>
<li>设计原则：<ul>
<li>封装变化</li>
<li>多样组合、少用继承</li>
<li>针对接口编程，不针对实现编程</li>
<li>类应该对扩展开放，对修改关闭</li>
<li>依赖抽象不要依赖具体类</li>
<li>类应该只有一个改变的理由 </li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dechangwang.github.io/2016/12/28/design-pattern/" data-id="cj2v8w20a0003ts9xtgwndsok" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/design-pattern/">design_pattern</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-compile-openJDK" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/05/compile-openJDK/" class="article-date">
  <time datetime="2016-11-05T13:53:39.000Z" itemprop="datePublished">2016-11-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/05/compile-openJDK/">compile_openJDK</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="自己动手编译openJDK源码"><a href="#自己动手编译openJDK源码" class="headerlink" title="自己动手编译openJDK源码"></a>自己动手编译openJDK源码</h5><ul>
<li><a href="http://openjdk.java.net/groups/hotspot/" target="_blank" rel="external">openJDK源码下载地址</a></li>
<li>编译环境<ul>
<li>强烈建议别用windows，我初开始编译时选择的Windows平台，搜到的各种资料都搭不起需要的环境。虽然《解析Java虚拟机开发》这本书中用了大篇幅来讲解在windows环境下搭建编译所需要的环境，但是其中的某些步骤讲解的并不是很清楚，原理也没有解释。最终果断放弃了在windows平台上编译，下面就谈谈我使用Ubuntu 14 如何编译openJDK7</li>
</ul>
</li>
<li>安装编译所需要的依赖<ul>
<li>sudo apt-get install build-essential gawk m4 libasound2-dev libcups2-dev libxrender-dev xorg-dev xutils-dev x11proto-print-dev binutils libmotif3 libmotif-dev ant libxt-dev libxtst-dev</li>
<li>注意x11proto-print-dev中是x11不要拼写错误哦</li>
</ul>
</li>
<li>设置环境变量（更多环境设置参数的意义可以参考《深入理解JAVA虚拟机》1.6节）<ul>
<li>export LANG=C #设定语言选项</li>
<li>export ALT_BOOTDIR=/usr/lib/jvm/default_java #Bootstrap JDK的安装路径。设置成自己的jdk路径</li>
<li>export ALLOW_DOWNLOADS=true #允许自动下载依赖</li>
<li>export HOTSPOT_BUILD_JOBS=2 #并行编译的线程数，设置为和CPU内核数量一致即可</li>
<li>export ALT_PARALLEL_COMPILE_JOBS=2  </li>
<li>export SKIP_COMPARE_IMAGES=true #比较本次build出来的映像与先前版本的差异。这个对我们来说没有意义，必须设置为false，否则sanity检查会报缺少先前版本JDK的映像。如果有设置dev或者DEV_ONLY=true的话这个不显式设置也行</li>
<li>export USE_PRECOMPILED_HEADER=true #使用预编译头文件，不加这个编译会更慢一些    </li>
<li>export BUILD_JAXP=false #这5项不设置默认为true,就是编译所有的</li>
<li>export BUILD_JAXWS=false   </li>
<li>export BUILD_CORBA=false  </li>
<li>export BUILD_HOTSPOT=true   </li>
<li>export BUILD_JDK=true</li>
<li>export DISABLE_HOTSPOT_OS_VERSION_CHECK=ok  </li>
<li>export SKIP_DEBUG_BUILD=false  </li>
<li>export SKIP_FASTDEBUG_BUILD=true  </li>
<li>export DEBUG_NAME=debug  </li>
<li>BUILD_DEPLOY=false  </li>
<li>BUILD_INSTALL=false  #把它设置为false就不会build出安装包。因为安装包里有些奇怪的依赖，但即便不build出它也已经能得到完整的JDK映像，所以还是别build它好了。 </li>
<li>export ALT_OUTPUTDIR=/home/andy/Desktop/myjdk/build #编译结果所存放的路径  </li>
<li>unset JAVA_HOME  </li>
<li>unset CLASSPATH</li>
</ul>
</li>
<li>设置完成后输入make sanity（在下载的源码的目录下）来查看环境是否配置好，若看到sanity check passed说明环境检查通过，可以执行make （all）执行来编译，make all默认是生成所有的</li>
</ul>
<table>
<thead>
<tr>
<th>Make Target</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>empty</td>
<td>build everything but no images</td>
</tr>
<tr>
<td>all</td>
<td>build everything includeing images</td>
</tr>
<tr>
<td>all-conf</td>
<td>build all configurations</td>
</tr>
<tr>
<td>images</td>
<td>create complete j2sdk and j2re images</td>
</tr>
<tr>
<td>install</td>
<td>install the generated images locally, typically in /usr/local</td>
</tr>
<tr>
<td>clean</td>
<td>remove all files generated by make, but not those generated by configure</td>
</tr>
<tr>
<td>dist-clean</td>
<td>remove all files generated by both and configure (basically killing the configuration)</td>
</tr>
<tr>
<td>help</td>
<td>give some help on using make, including some interesting make targets</td>
</tr>
</tbody>
</table>
<p>当出现如下信息时说明编译成功</p>
<p>—– Build times ——-<br>Start 2016-10-30 15:20:10<br>End   2016-10-30 19:55:36<br>00:01:35 corba<br>00:00:59 demos<br>00:10:33 hotspot<br>00:04:47 images<br>00:01:35 jaxp<br>00:06:13 jaxws<br>04:07:33 jdk<br>00:01:36 langtools<br>00:00:34 nashorn<br>04:35:26 TOTAL</p>
<ul>
<li>在出现编译成功的信息之前往往是要遇到许多错误的，下面我罗列下我遇到的一些问题以及解决方案（其他更多的问题通过google都是可以解决的）</li>
<li>出现<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">build-bootstrap-javac:</span><br><span class="line">/langtools/src/share/classes/com/sun/tools/javac/comp/Resolve.java:<span class="number">2182</span>: warning: [overrides] Class Resolve.InapplicableSymbolsError.Candidate overrides equals, but neither it nor any superclass overrides hashCode method</span><br><span class="line">    [javac]         <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Candidate</span> </span>&#123;</span><br><span class="line">    [javac]                 ^</span><br><span class="line">    [javac] error: warnings found and -Werror specified</span><br><span class="line">    [javac] <span class="number">1</span> error</span><br><span class="line">    [javac] <span class="number">1</span> warning</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>我先前使用的jdk8来编译的，最后改为oracle jdk7后改错误消失</p>
<ul>
<li>出现<br><code>javasymbol JVM_FindClassFromCaller, version SUNWprivate_1.1 not defined in file libjvm.so with link time reference错误</code><br>解决方法是修改文件：hotspot/make/linux/Makefile去掉文件中所有的./test_gamma即可，但是记住，该文件中总共有6处test_gamma,在删除test_gamma时，同时将其后的 &amp; ./也要一并删除</li>
<li>出现错误Error: time is more than 10 years from present<br>解决方法：修改jdk/src/share/classes/java/util/CurrencyData.properties文件，<code>TR=TRL;2004-12-31-22-00-00;TRY</code> 修改成  <code>TR=TRL;2015-12-31-22-00-00;TRY</code><br>但是我在这样修改了之后仍然有错，就将该文件中的所有时间改到了10年内，最终该错误解决。</li>
<li>遇到的其他错误google出的解决方法都可行，这里就不再赘述</li>
</ul>
<p><em>个人一开始编译的是openjdk7，但是由于实际需求是openjdk8，原先以为openjdk8和openjdk7编译的做法差不多，就按照编译7的做法来编译8，结果我在运行make sanity来检查环境设置时报出了Use of ALT_</em> environment variables for configuring the build is no longer supported。o(&gt;﹏&lt;)o，好吧继续google编译8的方法，结果出来的都是7的，没办法只能阅读源码中的README-builds.html。首先说道说道该文件，在编译7时也阅读了7源码中附带的builds文件但是感觉对编译源码来说并没有卵用。不过8不一样了，就像文件开头写到的!!!!!!!!!!!!!!! THIS IS A MAJOR RE-WRITE of this document. !!!!!!!!!!!!!，该文档确实有了很大的变化，仔细阅读该文档不难找出编译8的方法*</p>
<p><em>如果想要自己编译openJDK玩玩，建议编译8，相对于7来说可以省掉许多事</em></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dechangwang.github.io/2016/11/05/compile-openJDK/" data-id="cj2v8w20y0007ts9xbg182hwt" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-OkHttp-VS-HttpURLConnection" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/09/14/OkHttp-VS-HttpURLConnection/" class="article-date">
  <time datetime="2016-09-14T15:45:35.000Z" itemprop="datePublished">2016-09-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/14/OkHttp-VS-HttpURLConnection/">OkHttp VS HttpURLConnection</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="HttpURLConnection与OkHttp"><a href="#HttpURLConnection与OkHttp" class="headerlink" title="HttpURLConnection与OkHttp"></a>HttpURLConnection与OkHttp</h5><ul>
<li>HttpURLConnection和OkHttp底层都是通过封装Socket来实现网络连接，但是Okhttp相较于HttpURLConnection封装的比较彻底(这也就是为何会有Volley的原因吧)。<ul>
<li><font face="黑体" color="#0099ff"><em>对于一个简单的网络请求，如果使用Okhttp，只需要以下的几条语句就可以获得Response</em></font><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">OkHttpClient client = <span class="keyword">new</span> OkHttpClient();</span><br><span class="line">Request request = <span class="keyword">new</span> Request.Builder().url(url).build();</span><br><span class="line">Response response = client.newCall(request).execute();</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<p>但是如果采用HttpURLConncetion，返回的是一个InputStream，再通过读取字符串流得到我们需要的Response，这时的代码如下所示：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">URL url = <span class="keyword">new</span> URL(<span class="string">"http://www.android.com/"</span>);</span><br><span class="line">HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();</span><br><span class="line">InputStream in = <span class="keyword">new</span> BufferedInputStream(urlConnection.getInputStream());</span><br><span class="line">readStream(in);<span class="comment">//读取管道流中的内容</span></span><br><span class="line">in.close();<span class="comment">//省略异常处理</span></span><br></pre></td></tr></table></figure></p>
<p>从该方面可以看出使用OkHttp确实要比使用HttpURLConnection方便</p>
<ul>
<li>获取实例<ul>
<li><font face="黑体" color="#0099ff"><em>OkHttp在获取连接客户端时通过OKHttpClient的内部类Builder来实现初始化，即使直接new OkHttpClient(),也是在构造函数中调用了this(new Builder())，然后利用Builder中的默认参数初始化OkHttpClient。在使用OkHttp时，推荐使用单例模式，这是因为每一个OkHttpClient实例都会自己维护一个连接池、线程池，如果对于每一个请求创建一个实例则会大大浪费资源。但是使用单例又会有一个问题，如果对于某次请求想重新设置连接超时时间，直接修改单例对象显然不合理，重新new一个代价太大，合理的方法是clone一个实例用来单独自定义（浅拷贝得到的实例中对于引用的对象仍然共享，即连接池仍然共享）。</em></font></li>
<li>HttpURLConnection是URLConnection的子类，通过URL获得连接然后调用openConnection获取实例，其实也可以说HttpURLConnection是封装JDK包中的网络请求来完成自己的请求的。但是在使用HttpURLConnection时，必须首先使用new URl(String url),然后才能获取实例。</li>
</ul>
</li>
<li>建立网络连接<ul>
<li>这一点上2者有相似之处，对于HttpURLConnection当调用getInputStream()时才进行Socket连接，<font face="黑体" color="#0099ff"><em>对于OkHttp，当调用execute()|enqueue()时，才进行socket连接</em>，</font>但是HttpURLConnection不同的一点时，也可以直接通过调用connect()建立tcp连接，然后在读取数据时发送http请求。</li>
</ul>
</li>
<li>请求方式<ul>
<li><font face="黑体" color="#0099ff"><em>对于Okhttp，对外提供了异步请求(enqueue(callBack))和同步请求接口(execute())。</em><ul>
<li><strong>execute()方法：</strong>调用流程 <strong>RealCall.execute()–&gt; dispatcher.executed(realcall) –&gt; runningSyncCalls.add(realCall) </strong><br>dispatcher.executed()方法并没有执行realCall，只是将realCall添加到名为runningSyncCalls的Deque中保存，真正执行Call是在realCall.executed方法中调用的getResponseWithInterceptorChain(),该方法是执行拦截器链的入口。</li>
<li><strong>enqueue(callBack)方法：</strong>调用流程 <strong>realCall.enqueue(callBack) –&gt; dispatcher(AsyncCall(callBack))–&gt; executorService().execute(asyncCall)</strong><br>（这里的Call其实就是一个Runnable，在其run方法中调用了AsyncCall.execute() , 此处的execute()除了进入拦截器链外，还根据response的状态回调），在dispatcher.enqueue()方法中，首先判断是否已到达最大请求数，若没有则将该call添加到正在执行的deque中同时在线程池执行，否则将call缓存到准备执行的deque中。既然会将call缓存到deque中，那么何时执行这些缓存的call呢？其实在每次完成一次请求后，都会调用premoteCalls()，该方法的主要功能就是监测runningDeque是否空闲以及是否有待执行的请求。</li>
</ul>
</font></li>
<li>但是对于HttpURLConnection，如果想使用异步调用，则需要自己管理线程，在非UI线程中请求数据(虽然耗时的网络请求一般不会放在主线程中，但是让自己写异步请求总归没有直接调用来的方便)</li>
</ul>
</li>
<li>失败重试<ul>
<li><font face="黑体" color="#0099ff"><em>okhttp在发送网络请求时，采用了拦截器Chain来层层向下传递请求，当其中有一层可以获取Response时就返回。拦截器链中首先调用RetryAndFollowUpInterceptor，处理失败重试（最大重试次数=20）</em></font>但是在HttpURLConnection中并没有看到相关处理失败重试的相关逻辑，这样一旦失败就失败了并不会自动进行失败重试，要想实现失败重试，只能是自己判断ResponseCode写重试逻辑。</li>
</ul>
</li>
<li>网络请求缓存<ul>
<li>HttpUrlConnection直接在系统层面做了缓存策略处理，<font face="黑体" color="#0099ff"><em>而OkHttp的网络请求缓存是在拦截器Chain中处理的，对应的类是CacheInterceptor，该类监测缓存是否可用、读取缓存、以及更新缓存。</em></font></li>
</ul>
</li>
<li>连接池<ul>
<li>HttpURLConnection每次在获得连接时，是通过调用getNewHttpClient获得一个HttpClient实例(HttpClient发送http请求)，在HttpClient的构造函数中会调用openServer()方法，然后通过调用doConnect建立socket连接，这样似乎在每次连接时都是新建socket。但其实每次在获取HttpClient时并没有直接new，而是调用了httpClient.New()方法获取实例，在该方法中首先调用KeepAliveCache.get()获取一个HttpClient(也就是系统在维护的连接池)，如果得到的HttpClient！=null 且method！=“POST”时，使用已有的连接，否则新建socket连接。</li>
<li><font face="黑体" color="#0099ff"><em>OkHttp在每次生成新的连接时（即RealConnection，Connection封装了Socket），调用ConnectionPool中的put方法，将其连接保存到Deque中。当每次需要建立连接时首先判断connectionPool已有连接的address是否与将要建立连接的Address相等，若相等则直接返回Connection否则new RealConnection()</em></font>

</li>
</ul>
</li>
</ul>
<h5 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h5><ul>
<li>OkHttp与HttpURLConnection相比，优势主要体现在：<ul>
<li>对socket封装的更完善，网络请求直接返回Response，而HttpURLConnection返回Stream流，还需再次读取流中的字符。</li>
<li>对外接口丰富，OkHttp提供了同步、异步请求接口。</li>
<li>网络请求中处理了连接失败时自动重试的逻辑</li>
</ul>
</li>
<li>虽然OkHttp有许多优点，但是个人认为它在处理异步请求这里可能会出现问题，极端情形就是当前已达到最大请求数时，readyAsyncCalls中的Call可能一直得不到执行。假如在一次异步请求完成时，恰好有一个新的call要执行，但是finished方法中刚执行结束remove，此时runningSyncCalls.size() == maxRequests - 1,那么新的call会立即执行同时被添加到runningSyncCalls中，此时当线程到premoteCalls时，由于已达到最大请求数而不会执行readyAsyncCalls中的Call。</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dechangwang.github.io/2016/09/14/OkHttp-VS-HttpURLConnection/" data-id="cj2v8w2030002ts9xwcawv0cx" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-regular-expression" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/05/28/regular-expression/" class="article-date">
  <time datetime="2016-05-28T07:39:45.000Z" itemprop="datePublished">2016-05-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/28/regular-expression/">regular-expression</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <table>
<thead>
<tr>
<th style="text-align:center">贪婪型</th>
<th style="text-align:right">勉强型</th>
<th style="text-align:right">占有型</th>
<th style="text-align:right">如何匹配</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">X?</td>
<td style="text-align:right">X??</td>
<td style="text-align:right">X?+</td>
<td style="text-align:right">一个或0个X</td>
</tr>
<tr>
<td style="text-align:center">X*</td>
<td style="text-align:right">X*?</td>
<td style="text-align:right">X*+</td>
<td style="text-align:right">0个或多个X</td>
</tr>
<tr>
<td style="text-align:center">X+</td>
<td style="text-align:right">X+?</td>
<td style="text-align:right">X++</td>
<td style="text-align:right">一个或多个X</td>
</tr>
<tr>
<td style="text-align:center">X{n}</td>
<td style="text-align:right">X{n}?</td>
<td style="text-align:right">X{n}+</td>
<td style="text-align:right">恰好n次X</td>
</tr>
<tr>
<td style="text-align:center">X{n,}</td>
<td style="text-align:right">X{n,}?</td>
<td style="text-align:right">X{n,}+</td>
<td style="text-align:right">至少n次X</td>
</tr>
<tr>
<td style="text-align:center">X{n,m}</td>
<td style="text-align:right">X{n,m}?</td>
<td style="text-align:right">X{n,m}+</td>
<td style="text-align:right">至少n次X,且不超过m次</td>
</tr>
</tbody>
</table>
<h4 id="边界匹配符"><a href="#边界匹配符" class="headerlink" title="边界匹配符"></a>边界匹配符</h4><table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:right"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">^</td>
<td style="text-align:right">一行的开始</td>
</tr>
<tr>
<td style="text-align:center">$</td>
<td style="text-align:right">一行的结束</td>
</tr>
<tr>
<td style="text-align:center">\b</td>
<td style="text-align:right">词的边界</td>
</tr>
<tr>
<td style="text-align:center">\B</td>
<td style="text-align:right">非词的边界</td>
</tr>
<tr>
<td style="text-align:center">\G</td>
<td style="text-align:right">前一个匹配的结束</td>
</tr>
<tr>
<td style="text-align:center">?</td>
<td style="text-align:right">匹配先前的元素0or1次.</td>
</tr>
<tr>
<td style="text-align:center">\w</td>
<td style="text-align:right">匹配任何字符</td>
</tr>
</tbody>
</table>
<h4 id="字符类"><a href="#字符类" class="headerlink" title="字符类"></a>字符类</h4><table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:right"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">[abc]</td>
<td style="text-align:right">a, b, or c</td>
</tr>
<tr>
<td style="text-align:center">[^abc]</td>
<td style="text-align:right">Any character except a, b, or c (negation)</td>
</tr>
<tr>
<td style="text-align:center">[a-zA-Z]</td>
<td style="text-align:right">a through z or A through Z, inclusive (range)</td>
</tr>
<tr>
<td style="text-align:center">[a-d[m-p]]</td>
<td style="text-align:right">a through d, or m through p: [a-dm-p] (union)</td>
</tr>
<tr>
<td style="text-align:center">\d</td>
<td style="text-align:right">A digit: [0-9]</td>
</tr>
<tr>
<td style="text-align:center">\D</td>
<td style="text-align:right">A non-digit: [^0-9]</td>
</tr>
<tr>
<td style="text-align:center">*?</td>
<td style="text-align:right">Matches the previous element zero or more times, but as few times as possible.</td>
</tr>
<tr>
<td style="text-align:center">+?</td>
<td style="text-align:right">Matches the previous element one or more times, but as few times as possible.</td>
</tr>
</tbody>
</table>
<h4 id="一些例子"><a href="#一些例子" class="headerlink" title="一些例子"></a>一些例子</h4><table>
<thead>
<tr>
<th style="text-align:center">Pattern</th>
<th style="text-align:right">matches</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">\d*.\d</td>
<td style="text-align:right">“.0”, “19.9”, “219.9”</td>
</tr>
<tr>
<td style="text-align:center">“rai?n”</td>
<td style="text-align:right">“ran”, “rain”</td>
</tr>
<tr>
<td style="text-align:center">“\d{3,5}”</td>
<td style="text-align:right">“166”, “17668” “19302” in “193024”</td>
</tr>
<tr>
<td style="text-align:center">(?<double>\w)\k<double></double></double></td>
<td style="text-align:right">“ee” in “deep”</td>
</tr>
<tr>
<td style="text-align:center">\w+(?=.)</td>
<td style="text-align:right">“is”, “ran”, and “out” in “He is. The dog ran. The sun is out.”</td>
</tr>
</tbody>
</table>
<ul>
<li>检验密码强度<ul>
<li>包含大小写字母和数字的组合，不能使用特殊字符，长度在8-10之间。</li>
<li>^(?=.<em>\d)(?=.</em>[a-z])(?=.*[A-Z]).{8,10}$</li>
</ul>
</li>
<li>检验中文<ul>
<li>^[\u4e00-\u9fa5]{0,}$</li>
</ul>
</li>
</ul>
<p><em>例子来源于</em><a href="https://msdn.microsoft.com/en-us/library/az24scfc(v=vs.110" target="_blank" rel="external">这里</a>.aspx)<br><a href="https://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html" target="_blank" rel="external">更多用法</a></p>
<h4 id="java中正则匹配的使用"><a href="#java中正则匹配的使用" class="headerlink" title="java中正则匹配的使用"></a>java中正则匹配的使用</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Pattern p = Pattern.compile(<span class="string">"a*b"</span>);</span><br><span class="line">Matcher m = p.matcher(<span class="string">"aaaaab"</span>);</span><br><span class="line"><span class="keyword">boolean</span> b = m.matches();</span><br></pre></td></tr></table></figure>
<p><a href="https://regex101.com/#javascript" target="_blank" rel="external">在线练习正则表达式</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dechangwang.github.io/2016/05/28/regular-expression/" data-id="cj2v8w21c000bts9xgin9uhfi" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-maven" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/05/26/maven/" class="article-date">
  <time datetime="2016-05-26T09:32:32.000Z" itemprop="datePublished">2016-05-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/26/maven/">maven</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="mvn-v"><a href="#mvn-v" class="headerlink" title="mvn -v"></a>mvn -v</h4><pre><code>compile 编译
test 测试
package 打包
clean 删除target
install 安装jar包到本地仓库
</code></pre><h3 id="setting文件"><a href="#setting文件" class="headerlink" title="setting文件"></a>setting文件</h3><pre><code>&lt;id&gt;maven.net.cn&lt;/id&gt;
&lt;mirrorOf&gt;central&lt;/mirrorOf&gt;
&lt;name&gt;central mirror in china&lt;/name&gt;
&lt;url&gt;http://maven.net.cn/content/groups/public&lt;/url&gt;
</code></pre><p><em>更改仓库目录</em><br>    settting文件中的 55行修改目录 可以将该文件copy到repo目录中可以避免每次更新修改目录</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dechangwang.github.io/2016/05/26/maven/" data-id="cj2v8w20w0006ts9xbmkb3ouv" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-angularjs" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/05/25/angularjs/" class="article-date">
  <time datetime="2016-05-25T10:20:48.000Z" itemprop="datePublished">2016-05-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/25/angularjs/">angularjs</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="基于ui-router的页面跳转传参"><a href="#基于ui-router的页面跳转传参" class="headerlink" title="基于ui-router的页面跳转传参"></a>基于ui-router的页面跳转传参</h3><h4 id="ui-route路由到被跳转页面"><a href="#ui-route路由到被跳转页面" class="headerlink" title="ui-route路由到被跳转页面"></a>ui-route路由到被跳转页面</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.state(<span class="string">'home.my_product.edit'</span>,&#123;</span><br><span class="line">            url:<span class="string">'/edit/:product_id'</span>,</span><br><span class="line">            views:&#123;</span><br><span class="line">                <span class="string">'main@home'</span>:&#123;</span><br><span class="line">                    templateUrl:<span class="string">'views/edit_product.html'</span>,</span><br><span class="line">                    controller:<span class="string">'editProductCtrl'</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br></pre></td></tr></table></figure>
<h5 id="在需要跳转的function中使用state-go"><a href="#在需要跳转的function中使用state-go" class="headerlink" title="在需要跳转的function中使用state.go"></a>在需要跳转的function中使用state.go</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.controller(<span class="string">'myProductCtrl'</span>,[<span class="string">'$scope'</span>,<span class="string">'$http'</span>,<span class="string">'$state'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">$scope, $http,$state</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"> $scope.editProduct = <span class="function"><span class="keyword">function</span> (<span class="params">product_id</span>) </span>&#123;</span><br><span class="line">        $state.go(<span class="string">'home.my_product.edit'</span>,&#123;product_id:product_id&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;]);</span><br></pre></td></tr></table></figure>
<h5 id="得到product-id"><a href="#得到product-id" class="headerlink" title="得到product_id"></a>得到product_id</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.controller(<span class="string">'editProductCtrl'</span>,[<span class="string">'$scope'</span>,<span class="string">'$http'</span>,<span class="string">'$state'</span>,<span class="string">'$stateParams'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">$scope, $http,$state,$stateParams</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> product_id = $stateParams.product_id;</span><br><span class="line">    <span class="built_in">console</span>.log(product_id);</span><br><span class="line">&#125;]);</span><br></pre></td></tr></table></figure>
<p><a href="https://www.zhihu.com/question/33565135" target="_blank" rel="external">以上参考这里</a></p>
<h5 id="网页常少不了使用超链接传值，这该怎样是实现呢？"><a href="#网页常少不了使用超链接传值，这该怎样是实现呢？" class="headerlink" title="网页常少不了使用超链接传值，这该怎样是实现呢？"></a>网页常少不了使用超链接传值，这该怎样是实现呢？</h5><p><em>项目中使用的是ui-route</em></p>
<h5 id="例如有如下页面"><a href="#例如有如下页面" class="headerlink" title="例如有如下页面"></a>例如有如下页面</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>Route :WEB-INF/List.html<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">ng-controller</span>=<span class="string">"listCtl"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">li</span> <span class="attr">ng-repeat</span>=<span class="string">"id in [1, 2, 3 ]"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#/testlist/&#123;&#123;id&#125;&#125;"</span>&gt;</span>ID&#123;&#123;id&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="在路由中作如下配置"><a href="#在路由中作如下配置" class="headerlink" title="在路由中作如下配置"></a>在路由中作如下配置</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.state(<span class="string">'testlist'</span>,&#123;</span><br><span class="line">           url:<span class="string">'/testlist/:id'</span>,</span><br><span class="line">           templateUrl:<span class="string">'views/route/detail.html'</span>,</span><br><span class="line">       &#125;)</span><br></pre></td></tr></table></figure>
<h5 id="然后在detail-html页面的controller就可以获取id的值"><a href="#然后在detail-html页面的controller就可以获取id的值" class="headerlink" title="然后在detail.html页面的controller就可以获取id的值"></a>然后在detail.html页面的controller就可以获取id的值</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.controller(<span class="string">'detailCtl'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">$scope, $routeParams</span>) </span>&#123;</span><br><span class="line">    $scope.id = $routeParams.id;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="angularjs定义全局变量"><a href="#angularjs定义全局变量" class="headerlink" title="angularjs定义全局变量"></a>angularjs定义全局变量</h4><p><em>下面定义了一个test的全局变量</em><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> userInfoModule=angular.module(<span class="string">'UserInfoModule'</span>,[]);</span><br><span class="line"></span><br><span class="line">userInfoModule.value(<span class="string">'test'</span>,&#123;<span class="string">"test"</span>:<span class="string">"33"</span>,<span class="string">"test1"</span>:<span class="string">"test111"</span>&#125;);</span><br><span class="line"></span><br><span class="line">userInfoModule.controller(<span class="string">'UserinfoController'</span>,[<span class="string">'$scope'</span>,<span class="string">'test'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">$scope,test</span>) </span>&#123;</span><br><span class="line">	$scope.userInfo =&#123;</span><br><span class="line">		email:<span class="string">'164925@qq.com'</span>,</span><br><span class="line">		password:<span class="string">'dsadfa'</span>,</span><br><span class="line">		autoLogin:<span class="literal">true</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">console</span>.log(test);</span><br><span class="line">	$scope.getFormData=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log($scope.userInfo)</span><br><span class="line">		test=&#123;</span><br><span class="line">			test:<span class="string">'hahahaha'</span>,</span><br><span class="line">			test1:<span class="string">'hehehehehhe'</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">console</span>.log(test);</span><br><span class="line">	&#125;</span><br><span class="line">	$scope.setFormData=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		$scope.userInfo=&#123;</span><br><span class="line">			email:<span class="string">'dsdsdsd@126.com'</span>,</span><br><span class="line">			password:<span class="string">"werrrrrrrr"</span>,</span><br><span class="line">			autoLogin:<span class="literal">false</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line">	$scope.resetForm=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(test);</span><br><span class="line">		$scope.userInfo =&#123;</span><br><span class="line">			email:<span class="string">'164925@qq.com'</span>,</span><br><span class="line">			password:<span class="string">'dsadfa'</span>,</span><br><span class="line">			autoLogin:<span class="literal">true</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;])</span><br></pre></td></tr></table></figure></p>
<p><a href="http://blog.51yip.com/jsjquery/1601.html" target="_blank" rel="external">全局变量</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dechangwang.github.io/2016/05/25/angularjs/" data-id="cj2v8w1zw0001ts9xaddvhhyn" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-git" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/05/25/git/" class="article-date">
  <time datetime="2016-05-25T10:05:51.000Z" itemprop="datePublished">2016-05-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/25/git/">git</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="git-常用操作"><a href="#git-常用操作" class="headerlink" title="git 常用操作"></a>git 常用操作</h3><ul>
<li>github拉取指定分支: git fetch origin dev:dev</li>
<li>git pull 等同于 git fetch 紧接着一个 git merge</li>
<li>查看分支合并 git log —oneline —graph</li>
</ul>
<h5 id="有时添加-gitignore无效时使用如下命令"><a href="#有时添加-gitignore无效时使用如下命令" class="headerlink" title="有时添加.gitignore无效时使用如下命令"></a>有时添加.gitignore无效时使用如下命令</h5><ul>
<li>git rm -r –cached .</li>
<li>git add .</li>
</ul>
<h4 id="分支"><a href="#分支" class="headerlink" title="分支"></a>分支</h4><ul>
<li>git branch dev（分支名）</li>
<li>git checkout -b dev(创建并切换)</li>
<li>git merge dev(假设合并dev分支到当前分支)</li>
<li>git branch -d dev(删除分支)</li>
</ul>
<h3 id="修改本地库关联的远程库URL"><a href="#修改本地库关联的远程库URL" class="headerlink" title="修改本地库关联的远程库URL"></a>修改本地库关联的远程库URL</h3><ul>
<li>git remote set-url origin url（url是远程库的url）</li>
<li>当修改了github的username时，本地库关联的远程url也要做修改，此时就需要使用该指令</li>
</ul>
<h3 id="删除远程分支"><a href="#删除远程分支" class="headerlink" title="删除远程分支"></a>删除远程分支</h3><ul>
<li>git push origin —delete dev（分支名，比如dev)</li>
<li>git push origin :dev</li>
<li>在本地库中删除关联的某个远程库git remote rm name(这里的<u><em>name</em></u>是git remote add <u>name</u> url)</li>
</ul>
<h3 id="本地仓库与远程仓库关联"><a href="#本地仓库与远程仓库关联" class="headerlink" title="本地仓库与远程仓库关联"></a>本地仓库与远程仓库关联</h3><ul>
<li>在本地新建的库中git init</li>
<li>git remote add origin git@github.com:wdchang/此处为远程仓库的名字.git</li>
<li>git push -u origin master</li>
<li>若直接push 不行，就git branch –set-upstream-to=origin/master master</li>
<li>git pull</li>
<li>git push</li>
</ul>
<h3 id="commit写错了修改"><a href="#commit写错了修改" class="headerlink" title="commit写错了修改"></a>commit写错了修改</h3><ul>
<li>git commit –amend 可以对上一次的提交做修改</li>
<li>git push -f 提交 对于已经push</li>
</ul>
<h3 id="commit-warn：LF-will-be-replaced-by-CRLF"><a href="#commit-warn：LF-will-be-replaced-by-CRLF" class="headerlink" title="commit warn：LF will be replaced by CRLF"></a>commit warn：LF will be replaced by CRLF</h3><ul>
<li>git config core.autocrlf=false to system-wide gitconfig</li>
<li>git config –global core.autocrlf false per user solution</li>
<li>git config –local core.autocrlf false per project solution</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dechangwang.github.io/2016/05/25/git/" data-id="cj2v8w2110008ts9xrizrmp08" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/05/25/hello-world/" class="article-date">
  <time datetime="2016-05-25T09:52:52.615Z" itemprop="datePublished">2016-05-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/25/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dechangwang.github.io/2016/05/25/hello-world/" data-id="cj2v8w214000ats9xk8mfecjy" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/design-pattern/">design_pattern</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/design-pattern/" style="font-size: 10px;">design_pattern</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/05/19/linux-operation-order/">linux operation order</a>
          </li>
        
          <li>
            <a href="/2017/03/09/angularjs-Servlet/">angularjs_Servlet</a>
          </li>
        
          <li>
            <a href="/2016/12/28/design-pattern/">design_pattern</a>
          </li>
        
          <li>
            <a href="/2016/11/05/compile-openJDK/">compile_openJDK</a>
          </li>
        
          <li>
            <a href="/2016/09/14/OkHttp-VS-HttpURLConnection/">OkHttp VS HttpURLConnection</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Wang.dchang<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>